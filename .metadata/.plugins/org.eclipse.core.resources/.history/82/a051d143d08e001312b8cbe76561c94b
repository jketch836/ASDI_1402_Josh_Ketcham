//Main Window and Table

var mWin = Titanium.UI.createWindow({
	title: "Objects",
	backgroundColor: "#fff"
});
var navWindow = Ti.UI.iOS.createNavigationWindow({
	window: mWin
});

var objectData = require ('object_data');
var objectTable = [];
var aTable = Ti.UI.createTableView({
	data: objectTable
});


//Table Sections
var charSection = Ti.UI.createTableViewSection ({
	headerTitle: "Rurouni Kenshin Characters",
	footerTitle: "Hope you enjoyed Meeting the Characters"
});
var bookSection = Ti.UI.createTableViewSection ({
	headerTitle: "Book Series Information",
	footerTitle: "Hope you enjoyed the Information"
});
var objectTableSec = [charSection, bookSection];


var charObjectRows = function () {
	for (i = 0; i < objectData.chara.length; i++) {	
		var tableRow = Ti.UI.createTableViewRow({
			height: "40dp",
			top: 20
		});
		var charNameLabel = Ti.UI.createLabel({
			text: objectData.chara[i].name,
			font: {fontSize: "18dp",fontWeight: "bold"},
			left: 20
		});
		
		tableRow.addEventListener("click",function(a){
			var cInfoWindow = Ti.UI.createWindow({
				backgroundColor: "#fff"
			});	
			var winView = Ti.UI.createView({
				top: 0,
				borderRadius: 10,
				height: 520,
				width: 320,
				backgroundColor: "#C1CDCD"
			});
			var aboutLabel = Ti.UI.createLabel({
				text: objectData.chara[a.index].about(),
				color: "#000",
				top: 50
			});		
			var infoLabel = Ti.UI.createLabel({
				text: objectData.chara[a.index].info(),
				color: "#000",
				top: 180
			});
			winView.add(aboutLabel, infoLabel);
			cInfoWindow.add(winView);	
			navWindow.openWindow(cInfoWindow, {animated:true});
		});	
		tableRow.add(charNameLabel);
		charSection.add(tableRow);
		objectTable.push(tableRow);
	};
};






//Main Code
bookObjectRows();
charObjectRows();
aTable.setData(objectTableSec);
mWin.add(aTable);
navWindow.open();