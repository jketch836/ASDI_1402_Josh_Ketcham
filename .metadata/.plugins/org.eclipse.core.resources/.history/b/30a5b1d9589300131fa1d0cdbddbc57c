var councilURL = 'http://us.battle.net/api/wow/guild/the-venture-co/The%20Council%20of%20judgement?fields=members';

// var racesURL = 'http://us.battle.net/api/wow/data/character/races';

var json, wowAPI;
var remoteResponse = function() {
	json = JSON.parse(this.responseText);
    
	var win = Ti.UI.createWindow({
	});
	
	//Back Button Start
	var backView = Ti.UI.createView({
		backgroundColor: "#c48c1b",
		borderRadius: 5,
		height: 35,
		width: 80,
		top: '5dp',
		left: 20,
		file: 'main_menu.js'
	});
	
	var backLabel = Ti.UI.createLabel({
		text: "Back",
		font: {fontSize: 14, fontFamily: "Helvetica", fontWeight: "bold"},
		color: "#fff",
		center: 0,
		file: 'main_menu.js'
	});
	backView.add(backLabel);
	 
	backView.addEventListener('click', function(){
	   		var mainWindow = Titanium.UI.createWindow({  
				title:'Main Menu',
				backgroundColor: '#fff',
				url:'main_menu.js'
			});
			mainWindow.open(mainWindow, {animate: true});
	});
	//Back Button End
	
	var councilName = Ti.UI.createLabel({
		top: '20dp',
		center: '0dp',
		text: json.name,
		color: '#fff',
		font: {fontSize: 24, fontFamily: "Helvetica", fontStyle: 'bold'}
	});
	
	var picTabard = Ti.UI.createImageView({
		top: '60dp',
		height: '150dp',
		width: '150dp',
		image: 'guild_tabard.jpg'
	});
	
	var councilLVL = Ti.UI.createLabel({
		top: '220dp',
		left: '50dp',
		text: 'LVL: ' + json.level,
		color: '#fff',
		font: {fontSize: 18, fontFamily: "Helvetica", fontStyle: 'bold'}
	});
	
	var councilRealm = Ti.UI.createLabel({
		top: '260dp',
		left: '50dp',
		text: 'REALM: ' + json.realm,
		color: '#fff',
		font: {fontSize: 18, fontFamily: "Helvetica", fontStyle: 'bold'}
	});
	
	var councilAcheive = Ti.UI.createLabel({
		top: '290dp',
		left: '50dp',
		text: 'ACHIEVEMENT POINTS: ' + json.achievementPoints,
		color: '#fff',
		font: {fontSize: 18, fontFamily: "Helvetica", fontStyle: 'bold'}
	});

	var councilGroup = Ti.UI.createLabel({
		top: '320dp',
		left: '50dp',
		text: 'BATTLE GROUP: ' + json.battlegroup,
		color: '#fff',
		font: {fontSize: 18, fontFamily: "Helvetica", fontStyle: 'bold'}
	});

	var councilSide = Ti.UI.createLabel({
		top: '350dp',
		left: '50dp',
		text: 'SIDE: Alliance',
		color: '#fff',
		font: {fontSize: 18, fontFamily: "Helvetica", fontStyle: 'bold'}
	});

	var views = Ti.UI.createView({
		top: 20,
		borderRadius: 10,
		backgroundColor: "#022d5a",
		height: 'auto',
		width: 'auto'
	});
	
	views.add(backView, councilName, picTabard, councilLVL, councilRealm, councilAcheive, councilGroup, councilSide);
	win.add(views);
	win.open();
};


var remoteError = function(e) {
    Ti.API.debug("Status: " + this.status);
    Ti.API.debug("Text: " + this.responseText);
    Ti.API.debug("Error: " + e.error);
    alert("There's a problem pulling remote data");
};

var xhr = Ti.Network.createHTTPClient({
    onload: remoteResponse,
    onerror: remoteError,
    timeout:5000
});

//Main Code
xhr.open('GET', councilURL);
xhr.send();