Ti.UI.setBackgourndColor('white');

var curWindow = Ti.UI.currentWindow;
	
var navWin = Ti.UI.iOS.createNavigationWindow({
	window: curWindow
});


var crud = require('CRUD');

	var cancel = Ti.UI.createButton({
		systemButton:Ti.UI.iPhone.SystemButton.CANCEL
	});
	addContactWin.setLeftNavButton(cancel);
	
		cancel.addEventListener('click', function(){
			navWin.close();
		});
	
	
	var fName = Ti.UI.createTextField({
	    top: '75dp',
	    center: 0,    
	    height: 50,
	    width: 250,
	    color: '#000',    
	    hintText: 'Full Name',
	    autocorret: false,
	    // value: '',
	    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
	    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
	    borderColor: "#000"
	});
	
	var email = Ti.UI.createTextField({
	    top: '133dp',
	    center: 0,    
	    height: 50,
	    width: 250,
	    color: '#000',    
	    hintText: 'Email Address',
	    autocorret: false,
	    // value: '',
	    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
	    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
	    borderColor: "#000"
	});
	
	var age = Ti.UI.createTextField({
	    top:'190dp',
	    right: 35,
	    height: 50,
	    width: 75,
	    color: '#000',
	    hintText: 'Age',
	    // value: '',	    
	    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
	    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
	    borderColor: "#000",
	    keyboardType: Ti.UI.KEYBOARD_NUMBER_PAD
	});
	
	var phone = Ti.UI.createTextField({
	    top:'190dp',
	    left: 35,
	    height: 50,
	    width: 145,
	    color: '#000',
	    // value: '',	    
	    hintText: 'Phone Number',
	    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
	    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
	    borderColor: "#000",
	    keyboardType: Ti.UI.KEYBOARD_PHONE_PAD
	});
	
	
	var saveBTN = Ti.UI.createButton({
		systemButton:Ti.UI.iPhone.SystemButton.SAVE
	});
	addContactWin.setRightNavButton(saveBTN);
	
	saveBTN.addEventListener('click', function(){
		Ti.API.info('Going through loop');
			
			if (fName.value == '' && phone.value == '' && email.value == '') {
				alert('Please Enter Full Name, Phone Number, and eMail');
			} else if (fName.value == '') {
				alert('Please Enter Name');
			} else if (phone.value == '') {
				alert('Please Enter Phone Number');
			} else if (email.value == '') {
				alert('Please Enter Email Address');
			} else {
				
		Ti.API.info('all set');
				
			var inputContact = {};
			 	inputContact.fName_add = fName.value;
				inputContact.email_add = email.value;
				inputContact.age_add = age.value;
				inputContact.phone_add = phone.value;
				
		Ti.API.info('inserting data to table');
		
			db.execute('INSERT INTO contact (fName, email, phone, age) VALUES (?,?,?,?)', inputContact.fName_add, inputContact.email_add, inputContact.age_add, inputContact.phone_add);
			
		Ti.API.info('stringing info');	
		
			var contactInfo = escape(JSON.stringify(inputContact));
				
		Ti.API.info('pushing data to table');
		
			contactTable.setData(pushData());
		
				Ti.API.info('keyboard going down');		
			 
			 		fName.blur();
			 		email.blur();
			 		age.blur();
			 		phone.blur();
			 			
		Ti.API.info('clearing values');
			 		//Clearing Feilds and drop Keyboard
			 		fName.value = '';
			 		email.value = '';
			 		age.value = '';
			 		phone.value = '';
			 		
			 		alert(contactInfo + ' is saved!!');
			 		navWin.close();
			}
	});

	//Main Code
	addContactWin.add(fName, email, age, phone);
	navWin.open();