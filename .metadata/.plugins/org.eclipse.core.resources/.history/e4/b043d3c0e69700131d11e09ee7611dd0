mainWin = Ti.UI.createWindow({
	title: 'Contacts',
	backgroundColor: '#fff'
});

nWin = Ti.UI.iOS.createNavigationWindow({
	window: mainWin
});

var crud = Ti.include('CRUD.js');


var addContact = Ti.UI.createButton({
	height: '15dp',
	width:  '15dp',
	backgroundImage: 'add.png'
});
mainWin.setRightNavButton(addContact);

addContact.addEventListener('click', function(){
var addContacts = require('addContact');
});


// var editBTN = Ti.UI.createButton({
	// title: "Edit",
	// style: Ti.UI.iPhone.SystemButtonStyle.DONE,
	// font:{fontWeight:'bold',fontSize:10, fontFamily:'Helvetica'},
// });
// mainWin.setLeftNavButton(editBTN);

var tableData = Ti.UI.createTableView({
	top: 0,
	data: info,
	editable: true
});
tableData.setData(info);

tableData.addEventListener('click', function(a){
//Get stored data in dataRows

var presentRow = db.execute('SELECT * fROM contact WHERE id=?', a.dataRows.id);


	var id = presentRow.fieldByName('id');
	var fName = presentRow.fieldByName('fName');
	var age = presentRow.fieldByName('age');
	var phone = presentRow.fieldByName('phone');
	var email = presentRow.fieldByName('email');
		
		var opts = {
		  title: 'Edit/Delete Info',		
		  options: ['Edit', 'Delete', 'Cancel'],
		  selectedIndex: 1,
		  cancel: 2,
		  destructive: 1
		};
		
		opts.addEventListener('click', function(b){
			if(b.index === 0) {
				
				editfName.value = fName;
				editemail.value = email;
				editage.value = age;
				editphone.value = phone;
				
				editWindow.open();
				
				var editfunc = funtion(){
					   db.execute("UPDATE contact SET fName=?, email=?, age=?, phone=? WHERE id=?â€™, fName, email, age, phone);			
					   }	
			} else if (b.index === 1){
				var alertDialog = Ti.UI.createAlertDialog({
	        	title: 'Are you sure?',
	        	buttonNames: ['OK']
	   		});
	   			var deleteOk = function () {
	   				db.execute("DELETE contact SET fName=?, email=?, age=?, phone=? WHERE id = ?", fName, email, age, phone);
	   			};
			alertDialog.addEventListener('click', deleteOk);
			
			} else {
					
			}	
});


//Main Code
mainWin.add(tableData);
nWin.open();