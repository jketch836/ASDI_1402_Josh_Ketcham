var crud = require('CrudFile');
//caling crudFlie

// Window Begin
var tableWin = Ti.UI.createWindow({
	title : 'Council Members',
	backgroundColor : '#fff'
});
exports.tableWin = tableWin;
// Window End

var picTabard = Ti.UI.createImageView({
	height : Ti.UI.setHeight,
	width : Ti.UI.setWidth,
	image : 'guild_tabard.png'
});

var searchbar = Ti.UI.createSearchBar({
	top : 0,
	hintText : 'Search',
	barColor : '#fff'
});

var data = [];
exports.data = data;

var memTable = Titanium.UI.createTableView({
	search : searchbar,
	font : {
		fontStyle : 'Helvetica',
		fontSize : '12dp'
	},
	opacity : .8
});
exports.memTable = memTable;

//Event Listner Begin
memTable.addEventListener('click', function(e) {
	// console.log(e.rowData.name);
	// console.log(e.rowData.division);
	// console.log(e.rowData.level);
	// console.log(e.rowData.acheive);
	// console.log(e.rowData.title);
	var saveDia = Ti.UI.createAlertDialog({
		title : 'Save Member?',
		buttonNames : ['Cancel', 'Save']
	});
	saveDia.addEventListener('click', function(c) {
		if (c.index === 1) {
			crudSave.saveFunc();
			Ti.API.info('Saved');
		} else {null;
		}
	});

	//memeTable Event listener Main Code
	memWin.setRightNavButton(saveBTN);
	memWin.setLeftNavButton(cancelBTN);
	memWin.add(nameView, lvlView, achView, divView, picTabard, deleteBTN);
	memWinNav.open();
});
//Event Listner End

//Main Code
memTable.setData(data);
tableWin.add(picTabard, memTable);
tableWin.open();
