var addContactWin = Ti.UI.createWindow({
	title: 'Add New Contact',
	backgroundColor: '#F8F8FF'
});

var navWin = Ti.UI.iOS.createNavigationWindow({
	window: addContactWin
});


var crud = require('CRUD');
var main = require('app');


var cancel = Ti.UI.createButton({
systemButton:Ti.UI.iPhone.SystemButton.CANCEL
});
addContactWin.setLeftNavButton(cancel);

cancel.addEventListener('click', function(){
// var contact = require('app');
navWin.close();
});


var fName = Ti.UI.createTextField({
    top: '75dp',
    center: 0,    
    height: 50,
    width: 250,
    color: '#000',    
    hintText: 'Full Name',
    autocorret: false,
    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    borderColor: "#000"
});

var email = Ti.UI.createTextField({
    top: '133dp',
    center: 0,    
    height: 50,
    width: 250,
    color: '#000',    
    hintText: 'Email Address',
    autocorret: false,
    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    borderColor: "#000"
});

var age = Ti.UI.createTextField({
    top:'190dp',
    right: 35,
    height: 50,
    width: 75,
    color: '#000',
    hintText: 'Age',
    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    borderColor: "#000",
    keyboardType: Ti.UI.KEYBOARD_NUMBER_PAD
});

var phone = Ti.UI.createTextField({
    top:'190dp',
    left: 35,
    height: 50,
    width: 145,
    color: '#000',
    hintText: 'Phone Number',
    font:{fontSize:15, fontWeight:'bold', fontFamily:'Helvetica'},
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
    borderColor: "#000",
    keyboardType: Ti.UI.KEYBOARD_PHONE_PAD
});


var save = Ti.UI.createButton({
systemButton:Ti.UI.iPhone.SystemButton.SAVE
});
addContactWin.setRightNavButton(save);

save.addEventListener('click', function(){
tableData.setData(crud.save);
});

//Main Code
addContactWin.add(fName, email, age, phone);
navWin.open();



var form = Titanium.UI.currentWindow;

var st_id = Ti.UI.currentWindow.st_id;
var st_title = Ti.UI.currentWindow.st_title;
var st_desc	= Ti.UI.currentWindow.st_desc;
var st_date	= Ti.UI.currentWindow.st_date;
var st_index = Ti.UI.currentWindow.st_index;




t1.addEventListener("change", function(e) {
	if (e.value == '') {
    	form.setRightNavButton();
  	} else {
    	form.setRightNavButton(b1);
	}
});

t2.addEventListener("change", function(e) {
	if (e.value != '') {
    	form.setRightNavButton(b1);
	}
});

//Add event listener for save button
b1.addEventListener("click", function(e) {
	if (action == 'edit') {
    	var update_data = {index:st_index, title:st_title, st_title: st_title, st_desc: st_desc, st_id: st_id, st_date: st_date};
		Ti.App.fireEvent("doUpdateRow",update_data);    
	}

 	if (action == 'add') {
    	var add_data = {index:st_index, title:st_title, st_title: st_title, st_desc: st_desc, st_date: st_date};
		Ti.App.fireEvent("doAppendData",add_data);    
  	}
  	form.close();
});

//Add event listener for cancel button
b2.addEventListener('click',function() {
	form.close();
});



form.setLeftNavButton(b2);
form.add(t1);
form.add(t2);